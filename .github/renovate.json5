{
  $schema: "https://docs.renovatebot.com/renovate-schema.json",
  enabled: true,
  extends: ["config:base", ":dependencyDashboard", ":gitSignOff"],
  timezone: "Europe/London",
  labels: ["dependencies", "renovate"],
  prConcurrentLimit: 0,
  prHourlyLimit: 0,
  semanticCommits: "enabled",
  semanticCommitScope: "deps",
  repositories: ["cert-manager/cert-manager"],
  automerge: false,
  useBaseBranchConfig: "merge",
  postUpgradeTasks: {
    // This is a temporary fix to disable errors on a non interactive shell. Longer term, fix this in the makefiles-module.
    commands: ["export PS1='> ' && make generate"],
    executionMode: "branch",
  },
  postUpdateOptions: ["gomodTidy", "gomodUpdateImportPaths"],
  vulnerabilityAlerts: {
    enabled: true,
    labels: ["security"],
    schedule: ["at any time"],
  },
  packageRules: [
    {
      description: "Group Kubernetes dependencies",
      groupName: "kubernetes packages",
      matchDatasources: ["go"],
      matchPackageNames: ["k8s.io/**", "sigs.k8s.io/**"],
      groupSlug: "kubernetes",
      enabled: true,
      automerge: true,
    },
    {
      description: "Group Azure SDK dependencies",
      groupName: "Azure SDK",
      matchDatasources: ["go"],
      groupSlug: "azure-sdk-go",
      enabled: true,
      automerge: true,
      matchPackageNames: ["github.com/Azure{/,}**"],
    },
    {
      description: "Group Golang.org/x packages",
      groupSlug: "go-x",
      matchPackageNames: ["golang.org/x/**"],
      enabled: true,
      groupName: "Go extended libs",
    },
    {
      description: "Group AWS SDK dependencies",
      groupName: "AWS SDK",
      matchDatasources: ["go"],
      enabled: true,
      groupSlug: "aws-sdk-go",
      matchPackageNames: ["github.com/aws{/,}**"],
    },
    {
      description: "Group monitoring packages",
      groupName: "monitoring",
      matchDatasources: ["go"],
      groupSlug: "monitoring",
      enabled: true,
      matchPackageNames: ["/github.com/prometheus.*/"]
    },
    {
      description: "Group GitHub Actions",
      groupName: "GitHub Actions",
      matchManagers: ["github-actions"]
    },
    {
      description: "Pin Go version more conservatively",
      matchDatasources: ["golang-version"],
      rangeStrategy: "pin"
    },
    {
      description: "Group testing tools",
      groupName: "testing tools",
      matchPackageNames: [
        "github.com/onsi/ginkgo",
        "github.com/onsi/gomega",
        "github.com/stretchr/testify"
      ],
      groupSlug: "testing",
      matchDatasources: ["go"]
    },
    {
      description: "Security updates should be raised immediately",
      matchDatasources: ["go"],
      matchUpdateTypes: ["patch"],
      prPriority: 10,
      labels: ["security", "priority/important"],
      minimumReleaseAge: "0 days",
      matchPackageNames: [
        "golang.org/x/crypto",
        "golang.org/x/net",
        "github.com/golang-jwt/jwt",
        "google.golang.org/protobuf"
      ],
    },
    {
      description: "Be careful with Helm dependencies",
      matchDatasources: ["helm"],
      rangeStrategy: "bump",
      enabled: false,
      commitMessagePrefix: "chore(helm):",
    },
    {
      description: "Group linting tools",
      groupName: "linters",
      groupSlug: "linters",
      matchPackageNames: [
        "golangci/golangci-lint",
        "mvdan.cc/gofumpt",
        "github.com/daixiang0/gci"
      ],
    },
    {
      description: "Update cert-manager images",
      matchDatasources: ["docker"],
      matchPackageNames: ["/^quay.io/jetstack/cert-manager/"],
      groupName: "cert-manager images",
    },
    {
      description: "Disable cert manager updates",
      matchDatasources: ["go"],
      matchPackageNames: ["/^github.com/cert-manager/cert-manager$/"],
      enabled: false,
    },
    {
      description: "Limit major updates",
      matchUpdateTypes: ["major"],
      dependencyDashboardApproval: true,
      labels: ["breaking-change", "approval-needed"],
    }
  ],
  ignorePaths: [
    "**/vendor/**",
    "**/node_modules/**",
    "**/__tests__/**",
    "**/test/**"
  ],
  prBodyDefinitions: {
    Package: "{{depName}}",
    Type: "{{depType}}",
    Update: "{{updateType}}",
    "Current value": "{{currentValue}}",
    "New value": "{{newValue}}",
    Change: "`{{displayFrom}}` -> `{{displayTo}}`",
    References: "{{references}}",
    "Package file": "{{packageFile}}"
  },
  prBodyColumns: ["Package", "Type", "Update", "Change", "References"],
  prBodyNotes: [
    "/kind cleanup",
    "```release-note\n
    NONE\n
    ```",
    "**Note**: This PR was automatically created by Renovate Bot.",
    "",
    "Before merging:",
    "- [ ] Ensure all tests pass",
    "- [ ] Review the changelog/release notes of updated dependencies",
    "- [ ] Check for any breaking changes",
    "- [ ] Verify cert-manager still builds correctly"
  ],
  ignoreDeps: ["launchpad.net/gocheck"],
  constraints: {
    go: ">=1.21"
  }

}
